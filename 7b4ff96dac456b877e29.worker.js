!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/logomossaic/",r(r.s=2)}([function(t,e,r){t.exports=r(1)},function(t,e,r){var n=function(t){"use strict";var e=Object.prototype,r=e.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},i=n.iterator||"@@iterator",a=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function s(t,e,r,n){var i=e&&e.prototype instanceof u?e:u,a=Object.create(i.prototype),o=new k(n||[]);return a._invoke=function(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return M()}for(r.method=i,r.arg=a;;){var o=r.delegate;if(o){var s=_(o,r);if(s){if(s===l)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var u=h(t,e,r);if("normal"===u.type){if(n=r.done?"completed":"suspendedYield",u.arg===l)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(n="completed",r.method="throw",r.arg=u.arg)}}}(t,r,o),a}function h(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(n){return{type:"throw",arg:n}}}t.wrap=s;var l={};function u(){}function c(){}function f(){}var v={};v[i]=function(){return this};var d=Object.getPrototypeOf,y=d&&d(d(b([])));y&&y!==e&&r.call(y,i)&&(v=y);var g=f.prototype=u.prototype=Object.create(v);function p(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function m(t){var e;this._invoke=function(n,i){function a(){return new Promise((function(e,a){!function e(n,i,a,o){var s=h(t[n],t,i);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"===typeof u&&r.call(u,"__await")?Promise.resolve(u.__await).then((function(t){e("next",t,a,o)}),(function(t){e("throw",t,a,o)})):Promise.resolve(u).then((function(t){l.value=t,a(l)}),(function(t){return e("throw",t,a,o)}))}o(s.arg)}(n,i,e,a)}))}return e=e?e.then(a,a):a()}}function _(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,_(t,e),"throw"===e.method))return l;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return l}var n=h(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,l;var i=n.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,l):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,l)}function x(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(x,this),this.reset(!0)}function b(t){if(t){var e=t[i];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:M}}function M(){return{value:void 0,done:!0}}return c.prototype=g.constructor=f,f.constructor=c,f[o]=c.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===c||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,o in t||(t[o]="GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},p(m.prototype),m.prototype[a]=function(){return this},t.AsyncIterator=m,t.async=function(e,r,n,i){var a=new m(s(e,r,n,i));return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},p(g),g[o]="Generator",g[i]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=b,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return o.type="throw",o.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),h=r.call(a,"finallyLoc");if(s&&h){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=t,o.arg=e,a?(this.method="next",this.next=a.finallyLoc,l):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),l},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),w(r),l}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var i=n.arg;w(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:b(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),l}},t}(t.exports);try{regeneratorRuntime=n}catch(i){Function("r","regeneratorRuntime = r")(n)}},function(t,e,r){"use strict";r.r(e);var n=r(0),i=r.n(n);function a(t,e,r,n,i,a,o){try{var s=t[a](o),h=s.value}catch(l){return void r(l)}s.done?e(h):Promise.resolve(h).then(n,i)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function h(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}var l=Math.pow(2,-52),u=new Uint32Array(512),c=function(){function t(e){o(this,t);var r=e.length>>1;if(r>0&&"number"!==typeof e[0])throw new Error("Expected coords to contain numbers.");this.coords=e;var n=Math.max(2*r-5,0);this._triangles=new Uint32Array(3*n),this._halfedges=new Int32Array(3*n),this._hashSize=Math.ceil(Math.sqrt(r)),this._hullPrev=new Uint32Array(r),this._hullNext=new Uint32Array(r),this._hullTri=new Uint32Array(r),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(r),this._dists=new Float64Array(r),this.update()}return h(t,null,[{key:"from",value:function(e){for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x,i=e.length,a=new Float64Array(2*i),o=0;o<i;o++){var s=e[o];a[2*o]=r(s),a[2*o+1]=n(s)}return new t(a)}}]),h(t,[{key:"update",value:function(){for(var t=this.coords,e=this._hullPrev,r=this._hullNext,n=this._hullTri,i=this._hullHash,a=t.length>>1,o=1/0,s=1/0,h=-1/0,u=-1/0,c=0;c<a;c++){var v=t[2*c],y=t[2*c+1];v<o&&(o=v),y<s&&(s=y),v>h&&(h=v),y>u&&(u=y),this._ids[c]=c}for(var m,_,x,w=(o+h)/2,k=(s+u)/2,b=1/0,M=0;M<a;M++){var P=f(w,k,t[2*M],t[2*M+1]);P<b&&(m=M,b=P)}var T=t[2*m],L=t[2*m+1];b=1/0;for(var S=0;S<a;S++)if(S!==m){var A=f(T,L,t[2*S],t[2*S+1]);A<b&&A>0&&(_=S,b=A)}for(var E=t[2*_],j=t[2*_+1],O=1/0,I=0;I<a;I++)if(I!==m&&I!==_){var F=g(T,L,E,j,t[2*I],t[2*I+1]);F<O&&(x=I,O=F)}var N=t[2*x],z=t[2*x+1];if(O===1/0){for(var U=0;U<a;U++)this._dists[U]=t[2*U]-t[0]||t[2*U+1]-t[1];p(this._ids,this._dists,0,a-1);for(var G=new Uint32Array(a),C=0,K=0,R=-1/0;K<a;K++){var H=this._ids[K];this._dists[H]>R&&(G[C++]=H,R=this._dists[H])}return this.hull=G.subarray(0,C),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(d(T,L,E,j,N,z)){var q=_,Y=E,Z=j;_=x,E=N,j=z,x=q,N=Y,z=Z}var B=function(t,e,r,n,i,a){var o=r-t,s=n-e,h=i-t,l=a-e,u=o*o+s*s,c=h*h+l*l,f=.5/(o*l-s*h);return{x:t+(l*u-s*c)*f,y:e+(o*c-h*u)*f}}(T,L,E,j,N,z);this._cx=B.x,this._cy=B.y;for(var D=0;D<a;D++)this._dists[D]=f(t[2*D],t[2*D+1],B.x,B.y);p(this._ids,this._dists,0,a-1),this._hullStart=m;var J=3;r[m]=e[x]=_,r[_]=e[m]=x,r[x]=e[_]=m,n[m]=0,n[_]=1,n[x]=2,i.fill(-1),i[this._hashKey(T,L)]=m,i[this._hashKey(E,j)]=_,i[this._hashKey(N,z)]=x,this.trianglesLen=0,this._addTriangle(m,_,x,-1,-1,-1);for(var Q,V,W=0;W<this._ids.length;W++){var X=this._ids[W],$=t[2*X],tt=t[2*X+1];if(!(W>0&&Math.abs($-Q)<=l&&Math.abs(tt-V)<=l)&&(Q=$,V=tt,X!==m&&X!==_&&X!==x)){for(var et=0,rt=0,nt=this._hashKey($,tt);rt<this._hashSize&&(-1===(et=i[(nt+rt)%this._hashSize])||et===r[et]);rt++);for(var it=et=e[et],at=void 0;at=r[it],!d($,tt,t[2*it],t[2*it+1],t[2*at],t[2*at+1]);)if((it=at)===et){it=-1;break}if(-1!==it){var ot=this._addTriangle(it,X,r[it],-1,-1,n[it]);n[X]=this._legalize(ot+2),n[it]=ot,J++;for(var st=r[it];at=r[st],d($,tt,t[2*st],t[2*st+1],t[2*at],t[2*at+1]);)ot=this._addTriangle(st,X,at,n[X],-1,n[st]),n[X]=this._legalize(ot+2),r[st]=st,J--,st=at;if(it===et)for(;d($,tt,t[2*(at=e[it])],t[2*at+1],t[2*it],t[2*it+1]);)ot=this._addTriangle(at,X,it,-1,n[it],n[at]),this._legalize(ot+2),n[at]=ot,r[it]=it,J--,it=at;this._hullStart=e[X]=it,r[it]=e[st]=X,r[X]=st,i[this._hashKey($,tt)]=X,i[this._hashKey(t[2*it],t[2*it+1])]=it}}}this.hull=new Uint32Array(J);for(var ht=0,lt=this._hullStart;ht<J;ht++)this.hull[ht]=lt,lt=r[lt];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}},{key:"_hashKey",value:function(t,e){return Math.floor(function(t,e){var r=t/(Math.abs(t)+Math.abs(e));return(e>0?3-r:1+r)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}},{key:"_legalize",value:function(t){for(var e=this._triangles,r=this._halfedges,n=this.coords,i=0,a=0;;){var o=r[t],s=t-t%3;if(a=s+(t+2)%3,-1!==o){var h=o-o%3,l=s+(t+1)%3,c=h+(o+2)%3,f=e[a],v=e[t],d=e[l],g=e[c];if(y(n[2*f],n[2*f+1],n[2*v],n[2*v+1],n[2*d],n[2*d+1],n[2*g],n[2*g+1])){e[t]=g,e[o]=f;var p=r[c];if(-1===p){var m=this._hullStart;do{if(this._hullTri[m]===c){this._hullTri[m]=t;break}m=this._hullPrev[m]}while(m!==this._hullStart)}this._link(t,p),this._link(o,r[a]),this._link(a,c);var _=h+(o+1)%3;i<u.length&&(u[i++]=_)}else{if(0===i)break;t=u[--i]}}else{if(0===i)break;t=u[--i]}}return a}},{key:"_link",value:function(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}},{key:"_addTriangle",value:function(t,e,r,n,i,a){var o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=e,this._triangles[o+2]=r,this._link(o,n),this._link(o+1,i),this._link(o+2,a),this.trianglesLen+=3,o}}]),t}();function f(t,e,r,n){var i=t-r,a=e-n;return i*i+a*a}function v(t,e,r,n,i,a){var o=(n-e)*(i-t),s=(r-t)*(a-e);return Math.abs(o-s)>=33306690738754716e-32*Math.abs(o+s)?o-s:0}function d(t,e,r,n,i,a){return(v(i,a,t,e,r,n)||v(t,e,r,n,i,a)||v(r,n,i,a,t,e))<0}function y(t,e,r,n,i,a,o,s){var h=t-o,l=e-s,u=r-o,c=n-s,f=i-o,v=a-s,d=u*u+c*c,y=f*f+v*v;return h*(c*y-d*v)-l*(u*y-d*f)+(h*h+l*l)*(u*v-c*f)<0}function g(t,e,r,n,i,a){var o=r-t,s=n-e,h=i-t,l=a-e,u=o*o+s*s,c=h*h+l*l,f=.5/(o*l-s*h),v=(l*u-s*c)*f,d=(o*c-h*u)*f;return v*v+d*d}function p(t,e,r,n){if(n-r<=20)for(var i=r+1;i<=n;i++){for(var a=t[i],o=e[a],s=i-1;s>=r&&e[t[s]]>o;)t[s+1]=t[s--];t[s+1]=a}else{var h=r+1,l=n;m(t,r+n>>1,h),e[t[r]]>e[t[n]]&&m(t,r,n),e[t[h]]>e[t[n]]&&m(t,h,n),e[t[r]]>e[t[h]]&&m(t,r,h);for(var u=t[h],c=e[u];;){do{h++}while(e[t[h]]<c);do{l--}while(e[t[l]]>c);if(l<h)break;m(t,h,l)}t[r+1]=t[l],t[l]=u,n-h+1>=l-r?(p(t,e,h,n),p(t,e,r,l-1)):(p(t,e,r,l-1),p(t,e,h,n))}}function m(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function _(t){return t[0]}function x(t){return t[1]}var w=function(){function t(){o(this,t),this._x0=this._y0=this._x1=this._y1=null,this._=""}return h(t,[{key:"moveTo",value:function(t,e){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e)}},{key:"closePath",value:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}},{key:"lineTo",value:function(t,e){this._+="L".concat(this._x1=+t,",").concat(this._y1=+e)}},{key:"arc",value:function(t,e,r){var n=(t=+t)+(r=+r),i=e=+e;if(r<0)throw new Error("negative radius");null===this._x1?this._+="M".concat(n,",").concat(i):(Math.abs(this._x1-n)>1e-6||Math.abs(this._y1-i)>1e-6)&&(this._+="L"+n+","+i),r&&(this._+="A".concat(r,",").concat(r,",0,1,1,").concat(t-r,",").concat(e,"A").concat(r,",").concat(r,",0,1,1,").concat(this._x1=n,",").concat(this._y1=i))}},{key:"rect",value:function(t,e,r,n){this._+="M".concat(this._x0=this._x1=+t,",").concat(this._y0=this._y1=+e,"h").concat(+r,"v").concat(+n,"h").concat(-r,"Z")}},{key:"value",value:function(){return this._||null}}]),t}(),k=function(){function t(){o(this,t),this._=[]}return h(t,[{key:"moveTo",value:function(t,e){this._.push([t,e])}},{key:"closePath",value:function(){this._.push(this._[0].slice())}},{key:"lineTo",value:function(t,e){this._.push([t,e])}},{key:"value",value:function(){return this._.length?this._:null}}]),t}();function b(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var r=[],n=!0,i=!1,a=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!e||r.length!==e);n=!0);}catch(h){i=!0,a=h}finally{try{n||null==s.return||s.return()}finally{if(i)throw a}}return r}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,960,500],n=b(r,4),i=n[0],a=n[1],s=n[2],h=n[3];if(o(this,t),!((s=+s)>=(i=+i))||!((h=+h)>=(a=+a)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(2*e.points.length),this.vectors=new Float64Array(2*e.points.length),this.xmax=s,this.xmin=i,this.ymax=h,this.ymin=a,this._init()}return h(t,[{key:"update",value:function(){return this.delaunay.update(),this._init(),this}},{key:"_init",value:function(){for(var t,e,r=this.delaunay,n=r.points,i=r.hull,a=r.triangles,o=this.vectors,s=this.circumcenters=this._circumcenters.subarray(0,a.length/3*2),h=0,l=0,u=a.length;h<u;h+=3,l+=2){var c=2*a[h],f=2*a[h+1],v=2*a[h+2],d=n[c],y=n[c+1],g=n[f],p=n[f+1],m=n[v],_=n[v+1],x=g-d,w=p-y,k=m-d,b=_-y,M=x*x+w*w,P=k*k+b*b,T=2*(x*b-w*k);if(T)if(Math.abs(T)<1e-8)t=(d+m)/2,e=(y+_)/2;else{var L=1/T;t=d+(b*M-w*P)*L,e=y+(x*P-k*M)*L}else t=(d+m)/2-1e8*b,e=(y+_)/2+1e8*k;s[l]=t,s[l+1]=e}var S,A,E,j=i[i.length-1],O=4*j,I=n[2*j],F=n[2*j+1];o.fill(0);for(var N=0;N<i.length;++N)S=O,A=I,E=F,O=4*(j=i[N]),I=n[2*j],F=n[2*j+1],o[S+2]=o[O]=E-F,o[S+3]=o[O+1]=I-A}},{key:"render",value:function(t){var e=null==t?t=new w:void 0,r=this.delaunay,n=r.halfedges,i=r.inedges,a=r.hull,o=this.circumcenters,s=this.vectors;if(a.length<=1)return null;for(var h=0,l=n.length;h<l;++h){var u=n[h];if(!(u<h)){var c=2*Math.floor(h/3),f=2*Math.floor(u/3),v=o[c],d=o[c+1],y=o[f],g=o[f+1];this._renderSegment(v,d,y,g,t)}}for(var p,m=a[a.length-1],_=0;_<a.length;++_){p=m,m=a[_];var x=2*Math.floor(i[m]/3),k=o[x],b=o[x+1],M=4*p,P=this._project(k,b,s[M+2],s[M+3]);P&&this._renderSegment(k,b,P[0],P[1],t)}return e&&e.value()}},{key:"renderBounds",value:function(t){var e=null==t?t=new w:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),e&&e.value()}},{key:"renderCell",value:function(t,e){var r=null==e?e=new w:void 0,n=this._clip(t);if(null!==n){e.moveTo(n[0],n[1]);for(var i=n.length;n[0]===n[i-2]&&n[1]===n[i-1]&&i>1;)i-=2;for(var a=2;a<i;a+=2)n[a]===n[a-2]&&n[a+1]===n[a-1]||e.lineTo(n[a],n[a+1]);return e.closePath(),r&&r.value()}}},{key:"cellPolygons",value:i.a.mark((function t(){var e,r,n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.delaunay.points,r=0,n=e.length/2;case 2:if(!(r<n)){t.next=10;break}if(!(a=this.cellPolygon(r))){t.next=7;break}return t.next=7,a;case 7:++r,t.next=2;break;case 10:case"end":return t.stop()}}),t,this)}))},{key:"cellPolygon",value:function(t){var e=new k;return this.renderCell(t,e),e.value()}},{key:"_renderSegment",value:function(t,e,r,n,i){var a,o=this._regioncode(t,e),s=this._regioncode(r,n);0===o&&0===s?(i.moveTo(t,e),i.lineTo(r,n)):(a=this._clipSegment(t,e,r,n,o,s))&&(i.moveTo(a[0],a[1]),i.lineTo(a[2],a[3]))}},{key:"contains",value:function(t,e,r){return(e=+e)===e&&(r=+r)===r&&this.delaunay._step(t,e,r)===t}},{key:"neighbors",value:i.a.mark((function t(e){var r,n,a,o,s,h,l,u,c,f,v,d;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=this._clip(e))){t.next=42;break}n=!0,a=!1,o=void 0,t.prev=5,s=this.delaunay.neighbors(e)[Symbol.iterator]();case 7:if(n=(h=s.next()).done){t.next=28;break}if(l=h.value,!(u=this._clip(l))){t.next=25;break}c=0,f=r.length;case 12:if(!(c<f)){t.next=25;break}v=0,d=u.length;case 14:if(!(v<d)){t.next=22;break}if(r[c]!=u[v]||r[c+1]!=u[v+1]||r[(c+2)%f]!=u[(v+d-2)%d]||r[(c+3)%f]!=u[(v+d-1)%d]){t.next=19;break}return t.next=18,l;case 18:return t.abrupt("break",25);case 19:v+=2,t.next=14;break;case 22:c+=2,t.next=12;break;case 25:n=!0,t.next=7;break;case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(5),a=!0,o=t.t0;case 34:t.prev=34,t.prev=35,n||null==s.return||s.return();case 37:if(t.prev=37,!a){t.next=40;break}throw o;case 40:return t.finish(37);case 41:return t.finish(34);case 42:case"end":return t.stop()}}),t,this,[[5,30,34,42],[35,,37,41]])}))},{key:"_cell",value:function(t){var e=this.circumcenters,r=this.delaunay,n=r.inedges,i=r.halfedges,a=r.triangles,o=n[t];if(-1===o)return null;var s=[],h=o;do{var l=Math.floor(h/3);if(s.push(e[2*l],e[2*l+1]),a[h=h%3===2?h-2:h+1]!==t)break;h=i[h]}while(h!==o&&-1!==h);return s}},{key:"_clip",value:function(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];var e=this._cell(t);if(null===e)return null;var r=this.vectors,n=4*t;return r[n]||r[n+1]?this._clipInfinite(t,e,r[n],r[n+1],r[n+2],r[n+3]):this._clipFinite(t,e)}},{key:"_clipFinite",value:function(t,e){for(var r,n,i,a,o,s=e.length,h=null,l=e[s-2],u=e[s-1],c=this._regioncode(l,u),f=0;f<s;f+=2)if(r=l,n=u,l=e[f],u=e[f+1],i=c,c=this._regioncode(l,u),0===i&&0===c)a=o,o=0,h?h.push(l,u):h=[l,u];else{var v=void 0,d=void 0,y=void 0,g=void 0,p=void 0;if(0===i){if(null===(v=this._clipSegment(r,n,l,u,i,c)))continue;var m=b(v,4);d=m[0],y=m[1],g=m[2],p=m[3]}else{if(null===(v=this._clipSegment(l,u,r,n,c,i)))continue;var _=b(v,4);g=_[0],p=_[1],d=_[2],y=_[3],a=o,o=this._edgecode(d,y),a&&o&&this._edge(t,a,o,h,h.length),h?h.push(d,y):h=[d,y]}a=o,o=this._edgecode(g,p),a&&o&&this._edge(t,a,o,h,h.length),h?h.push(g,p):h=[g,p]}if(h)a=o,o=this._edgecode(h[0],h[1]),a&&o&&this._edge(t,a,o,h,h.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return h}},{key:"_clipSegment",value:function(t,e,r,n,i,a){for(;;){if(0===i&&0===a)return[t,e,r,n];if(i&a)return null;var o=void 0,s=void 0,h=i||a;8&h?(o=t+(r-t)*(this.ymax-e)/(n-e),s=this.ymax):4&h?(o=t+(r-t)*(this.ymin-e)/(n-e),s=this.ymin):2&h?(s=e+(n-e)*(this.xmax-t)/(r-t),o=this.xmax):(s=e+(n-e)*(this.xmin-t)/(r-t),o=this.xmin),i?(t=o,e=s,i=this._regioncode(t,e)):(r=o,n=s,a=this._regioncode(r,n))}}},{key:"_clipInfinite",value:function(t,e,r,n,i,a){var o,s=Array.from(e);if((o=this._project(s[0],s[1],r,n))&&s.unshift(o[0],o[1]),(o=this._project(s[s.length-2],s[s.length-1],i,a))&&s.push(o[0],o[1]),s=this._clipFinite(t,s))for(var h,l=0,u=s.length,c=this._edgecode(s[u-2],s[u-1]);l<u;l+=2)h=c,c=this._edgecode(s[l],s[l+1]),h&&c&&(l=this._edge(t,h,c,s,l),u=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}},{key:"_edge",value:function(t,e,r,n,i){for(;e!==r;){var a=void 0,o=void 0;switch(e){case 5:e=4;continue;case 4:e=6,a=this.xmax,o=this.ymin;break;case 6:e=2;continue;case 2:e=10,a=this.xmax,o=this.ymax;break;case 10:e=8;continue;case 8:e=9,a=this.xmin,o=this.ymax;break;case 9:e=1;continue;case 1:e=5,a=this.xmin,o=this.ymin}n[i]===a&&n[i+1]===o||!this.contains(t,a,o)||(n.splice(i,0,a,o),i+=2)}if(n.length>4)for(var s=0;s<n.length;s+=2){var h=(s+2)%n.length,l=(s+4)%n.length;(n[s]===n[h]&&n[h]===n[l]||n[s+1]===n[h+1]&&n[h+1]===n[l+1])&&(n.splice(h,2),s-=2)}return i}},{key:"_project",value:function(t,e,r,n){var i,a,o,s=1/0;if(n<0){if(e<=this.ymin)return null;(i=(this.ymin-e)/n)<s&&(o=this.ymin,a=t+(s=i)*r)}else if(n>0){if(e>=this.ymax)return null;(i=(this.ymax-e)/n)<s&&(o=this.ymax,a=t+(s=i)*r)}if(r>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/r)<s&&(a=this.xmax,o=e+(s=i)*n)}else if(r<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/r)<s&&(a=this.xmin,o=e+(s=i)*n)}return[a,o]}},{key:"_edgecode",value:function(t,e){return(t===this.xmin?1:t===this.xmax?2:0)|(e===this.ymin?4:e===this.ymax?8:0)}},{key:"_regioncode",value:function(t,e){return(t<this.xmin?1:t>this.xmax?2:0)|(e<this.ymin?4:e>this.ymax?8:0)}}]),t}(),P=i.a.mark(O),T=2*Math.PI;function L(t){return t[0]}function S(t){return t[1]}function A(t,e,r){return[t+Math.sin(t+e)*r,e+Math.cos(t-e)*r]}var E=function(){function t(e){o(this,t),this._delaunator=new c(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}return h(t,null,[{key:"from",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S,i=arguments.length>3?arguments[3]:void 0;return new t("length"in e?j(e,r,n,i):Float64Array.from(O(e,r,n,i)))}}]),h(t,[{key:"update",value:function(){return this._delaunator.update(),this._init(),this}},{key:"_init",value:function(){var t=this._delaunator,e=this.points;if(t.hull&&t.hull.length>2&&function(t){for(var e=t.triangles,r=t.coords,n=0;n<e.length;n+=3){var i=2*e[n],a=2*e[n+1],o=2*e[n+2];if((r[o]-r[i])*(r[a+1]-r[i+1])-(r[a]-r[i])*(r[o+1]-r[i+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:e.length/2},(function(t,e){return e})).sort((function(t,r){return e[2*t]-e[2*r]||e[2*t+1]-e[2*r+1]}));for(var r=this.collinear[0],n=this.collinear[this.collinear.length-1],i=[e[2*r],e[2*r+1],e[2*n],e[2*n+1]],a=1e-8*Math.sqrt(Math.pow(i[3]-i[1],2)+Math.pow(i[2]-i[0],2)),o=0,s=e.length/2;o<s;++o){var h=A(e[2*o],e[2*o+1],a);e[2*o]=h[0],e[2*o+1]=h[1]}this._delaunator=new c(e)}else delete this.collinear;for(var l=this.halfedges=this._delaunator.halfedges,u=this.hull=this._delaunator.hull,f=this.triangles=this._delaunator.triangles,v=this.inedges.fill(-1),d=this._hullIndex.fill(-1),y=0,g=l.length;y<g;++y){var p=f[y%3===2?y-2:y+1];-1!==l[y]&&-1!==v[p]||(v[p]=y)}for(var m=0,_=u.length;m<_;++m)d[u[m]]=m;u.length<=2&&u.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=u[0],this.triangles[1]=u[1],this.triangles[2]=u[1],v[u[0]]=1,2===u.length&&(v[u[1]]=0))}},{key:"voronoi",value:function(t){return new M(this,t)}},{key:"neighbors",value:i.a.mark((function t(e){var r,n,a,o,s,h,l,u,c,f,v;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=this.inedges,n=this.hull,a=this._hullIndex,o=this.halfedges,s=this.triangles,!(h=this.collinear)){t.next=10;break}if(!((l=h.indexOf(e))>0)){t.next=6;break}return t.next=6,h[l-1];case 6:if(!(l<h.length-1)){t.next=9;break}return t.next=9,h[l+1];case 9:return t.abrupt("return");case 10:if(-1!==(u=r[e])){t.next=13;break}return t.abrupt("return");case 13:c=u,f=-1;case 14:return t.next=16,f=s[c];case 16:if(s[c=c%3===2?c-2:c+1]===e){t.next=19;break}return t.abrupt("return");case 19:if(-1!==(c=o[c])){t.next=26;break}if((v=n[(a[e]+1)%n.length])===f){t.next=25;break}return t.next=25,v;case 25:return t.abrupt("return");case 26:if(c!==u){t.next=14;break}case 27:case"end":return t.stop()}}),t,this)}))},{key:"find",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if((t=+t)!==t||(e=+e)!==e)return-1;for(var n,i=r;(n=this._step(r,t,e))>=0&&n!==r&&n!==i;)r=n;return n}},{key:"_step",value:function(t,e,r){var n=this.inedges,i=this.hull,a=this._hullIndex,o=this.halfedges,s=this.triangles,h=this.points;if(-1===n[t]||!h.length)return(t+1)%(h.length>>1);var l=t,u=Math.pow(e-h[2*t],2)+Math.pow(r-h[2*t+1],2),c=n[t],f=c;do{var v=s[f],d=Math.pow(e-h[2*v],2)+Math.pow(r-h[2*v+1],2);if(d<u&&(u=d,l=v),s[f=f%3===2?f-2:f+1]!==t)break;if(-1===(f=o[f])){if((f=i[(a[t]+1)%i.length])!==v&&Math.pow(e-h[2*f],2)+Math.pow(r-h[2*f+1],2)<u)return f;break}}while(f!==c);return l}},{key:"render",value:function(t){for(var e=null==t?t=new w:void 0,r=this.points,n=this.halfedges,i=this.triangles,a=0,o=n.length;a<o;++a){var s=n[a];if(!(s<a)){var h=2*i[a],l=2*i[s];t.moveTo(r[h],r[h+1]),t.lineTo(r[l],r[l+1])}}return this.renderHull(t),e&&e.value()}},{key:"renderPoints",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=null==t?t=new w:void 0,n=this.points,i=0,a=n.length;i<a;i+=2){var o=n[i],s=n[i+1];t.moveTo(o+e,s),t.arc(o,s,e,0,T)}return r&&r.value()}},{key:"renderHull",value:function(t){var e=null==t?t=new w:void 0,r=this.hull,n=this.points,i=2*r[0],a=r.length;t.moveTo(n[i],n[i+1]);for(var o=1;o<a;++o){var s=2*r[o];t.lineTo(n[s],n[s+1])}return t.closePath(),e&&e.value()}},{key:"hullPolygon",value:function(){var t=new k;return this.renderHull(t),t.value()}},{key:"renderTriangle",value:function(t,e){var r=null==e?e=new w:void 0,n=this.points,i=this.triangles,a=2*i[t*=3],o=2*i[t+1],s=2*i[t+2];return e.moveTo(n[a],n[a+1]),e.lineTo(n[o],n[o+1]),e.lineTo(n[s],n[s+1]),e.closePath(),r&&r.value()}},{key:"trianglePolygons",value:i.a.mark((function t(){var e,r,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.triangles,r=0,n=e.length/3;case 2:if(!(r<n)){t.next=8;break}return t.next=5,this.trianglePolygon(r);case 5:++r,t.next=2;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"trianglePolygon",value:function(t){var e=new k;return this.renderTriangle(t,e),e.value()}}]),t}();function j(t,e,r,n){for(var i=t.length,a=new Float64Array(2*i),o=0;o<i;++o){var s=t[o];a[2*o]=e.call(n,s,o,t),a[2*o+1]=r.call(n,s,o,t)}return a}function O(t,e,r,n){var a,o,s,h,l,u,c;return i.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:a=0,o=!0,s=!1,h=void 0,i.prev=4,l=t[Symbol.iterator]();case 6:if(o=(u=l.next()).done){i.next=16;break}return c=u.value,i.next=10,e.call(n,c,a,t);case 10:return i.next=12,r.call(n,c,a,t);case 12:++a;case 13:o=!0,i.next=6;break;case 16:i.next=22;break;case 18:i.prev=18,i.t0=i.catch(4),s=!0,h=i.t0;case 22:i.prev=22,i.prev=23,o||null==l.return||l.return();case 25:if(i.prev=25,!s){i.next=28;break}throw h;case 28:return i.finish(25);case 29:return i.finish(22);case 30:case"end":return i.stop()}}),P,null,[[4,18,22,30],[23,,25,29]])}r.d(e,"calculatePoints",(function(){return I})),r.d(e,"sort",(function(){return z})),r.d(e,"placeInDiv",(function(){return G}));var I=function(){var t,e=(t=i.a.mark((function t(e,r,n,a){var o,s,h,l,u,c,f,v,d,y,g,p,m,_,x,w,k,b,M,P;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=new Float64Array(2*a),s=new Float64Array(2*a),h=new Float64Array(a),l=0;case 4:if(!(l<a)){t.next=17;break}u=0;case 6:if(!(u<30)){t.next=14;break}if(c=o[2*l]=Math.floor(Math.random()*r),f=o[2*l+1]=Math.floor(Math.random()*n),!(Math.random()<e[f*r+c])){t.next=11;break}return t.abrupt("break",14);case 11:++u,t.next=6;break;case 14:++l,t.next=4;break;case 17:return t.next=19,new E(o);case 19:return v=t.sent,t.next=22,v.voronoi([0,0,r,n]);case 22:for(d=t.sent,y=0;y<80;++y){for(s.fill(0),h.fill(0),g=0,p=0;g<n;++g)for(m=0;m<r;++m)_=e[g*r+m],p=v.find(m+.5,g+.5,p),h[p]+=_,s[2*p]+=_*(m+.5),s[2*p+1]+=_*(g+.5);for(x=10*Math.pow(y+1,-.8),w=0;w<a;++w)k=o[2*w],b=o[2*w+1],M=h[w]?s[2*w]/h[w]:k,P=h[w]?s[2*w+1]/h[w]:b,o[2*w]=k+1.8*(M-k)+(Math.random()-.5)*x,o[2*w+1]=b+1.8*(P-b)+(Math.random()-.5)*x;postMessage(o),d.update()}case 24:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,i){var o=t.apply(e,r);function s(t){a(o,n,i,s,h,"next",t)}function h(t){a(o,n,i,s,h,"throw",t)}s(void 0)}))});return function(t,r,n,i){return e.apply(this,arguments)}}();function F(t,e){return t[0]-e[0]}function N(t,e){return t[1]-e[1]}var z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",r=[],n=U(t);"x"===e&&n.sort(F),"y"===e&&n.sort(N);for(var i=0,a=[],o=[],s=0;s<n.length;s++){var h=n[s][0],l=n[s][1];l>i&&(l>=i&&l<i+1?o.push(h):(o.sort((function(t,e){return t-e})),a.push(o),o=[],i+=1)),r.push(h),r.push(l)}return a},U=function(t){for(var e=[],r=0;r<t.length;r+=2){var n=t[r],i=t[r+1];e.push([n,i])}return e},G=function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=[],n=0;n<t.length;n+=e){for(var i=[],a=t[n][0],o=0,s=t[n].length;o<s;o++){var h=t[n][o];h>=a&&(a=h+e,i.push(h))}r.push(i)}return r};addEventListener("message",(function(t){var r,n=t.data,i=n.type,a=n.method,o=n.id,s=n.params;"RPC"===i&&a&&((r=e[a])?Promise.resolve().then((function(){return r.apply(e,s)})):Promise.reject("No such method")).then((function(t){postMessage({type:"RPC",id:o,result:t})})).catch((function(t){var e={message:t};t.stack&&(e.message=t.message,e.stack=t.stack,e.name=t.name),postMessage({type:"RPC",id:o,error:e})}))})),postMessage({type:"RPC",method:"ready"})}]);
//# sourceMappingURL=7b4ff96dac456b877e29.worker.js.map